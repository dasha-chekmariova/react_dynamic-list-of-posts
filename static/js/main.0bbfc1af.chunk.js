(this["webpackJsonpreact_dynamic-list-of-posts"]=this["webpackJsonpreact_dynamic-list-of-posts"]||[]).push([[0],[,,,,,,,,,,,,,,,function(t,e,n){},function(t,e,n){},function(t,e,n){},,function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var c=n(8),s=n.n(c),a=n(4),r=n(3),o=n(2),i=n.n(o),u=n(1),l=(n(15),"https://mate.academy/students-api");function j(){return b.apply(this,arguments)}function b(){return(b=Object(a.a)(i.a.mark((function t(){var e;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(l,"/posts"));case 2:return e=t.sent,t.abrupt("return",e.json());case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function d(){return m.apply(this,arguments)}function m(){return(m=Object(a.a)(i.a.mark((function t(){var e;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(l,"/users"));case 2:return e=t.sent,t.abrupt("return",e.json());case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}n(16),n(17);var p=n(0),f=function(t){var e=t.posts,n=t.setSeletedPostId,c=Object(u.useState)(0),s=Object(r.a)(c,2),a=s[0],o=s[1];return Object(p.jsx)(p.Fragment,{children:e&&Object(p.jsxs)("div",{className:"PostsList",children:[Object(p.jsx)("h2",{children:"Posts:"}),Object(p.jsx)("ul",{"data-cy":"postDetails",className:"PostsList__list",children:e.map((function(t){return Object(p.jsxs)("li",{className:"PostsList__item",children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("b",{children:"[User #".concat(t.userId,"]:")}),t.title]}),a===t.id?Object(p.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(){n(0),o(0)},children:"Close"}):Object(p.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(){n(t.id),o(t.id)},children:"Open"})]},t.id)}))})]})})},h=n(9),O=(n(19),function(t){var e=t.setComment,n=Object(u.useState)(""),c=Object(r.a)(n,2),s=c[0],a=c[1],o=Object(u.useState)(""),i=Object(r.a)(o,2),l=i[0],j=i[1],b=Object(u.useState)(""),d=Object(r.a)(b,2),m=d[0],f=d[1];return Object(p.jsxs)("form",{className:"NewCommentForm",children:[Object(p.jsx)("div",{className:"form-field",children:Object(p.jsx)("input",{required:!0,value:s,type:"text",name:"name",placeholder:"Your name",className:"NewCommentForm__input",onChange:function(t){return a(t.target.value)}})}),Object(p.jsx)("div",{className:"form-field",children:Object(p.jsx)("input",{value:l,type:"email",name:"email",placeholder:"Your email",className:"NewCommentForm__input",required:!0,onChange:function(t){return j(t.target.value)}})}),Object(p.jsx)("div",{className:"form-field",children:Object(p.jsx)("textarea",{value:m,name:"body",placeholder:"Type comment here",className:"NewCommentForm__input",onChange:function(t){return f(t.target.value)},required:!0})}),Object(p.jsx)("button",{type:"submit",className:"NewCommentForm__submit-button button",onClick:function(t){t.preventDefault(),s&&l&&m&&(e((function(t){return t&&[].concat(Object(h.a)(t),[{name:s,email:l,body:m}])})),a(""),j(""),f(""))},children:"Add a comment"})]})}),x=(n(20),"https://mate.academy/students-api"),v=function(){var t=Object(a.a)(i.a.mark((function t(e){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(x,"/posts?userId=").concat(e));case 2:return n=t.sent,t.abrupt("return",n.json());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),_=function(){var t=Object(a.a)(i.a.mark((function t(e){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(x,"/posts/").concat(e));case 2:return n=t.sent,t.abrupt("return",n.json());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),N=function(){var t=Object(a.a)(i.a.mark((function t(e){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat("https://mate.academy/students-api","/comments?postId=").concat(e));case 2:return n=t.sent,t.abrupt("return",n.json());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),y=function(t){var e=t.selectedPostId,n=Object(u.useState)(),c=Object(r.a)(n,2),s=c[0],a=c[1],o=Object(u.useState)(),i=Object(r.a)(o,2),l=i[0],j=i[1],b=Object(u.useState)(!1),d=Object(r.a)(b,2),m=d[0],f=d[1];Object(u.useEffect)((function(){_(e).then((function(t){return a(t)})),N(e).then((function(t){return j(t)}))}),[e]);return Object(p.jsx)(p.Fragment,{children:s&&l&&Object(p.jsxs)("div",{"data-cy":"postDetails",className:"PostDetails",children:[Object(p.jsx)("h2",{children:"Post details:"}),Object(p.jsx)("section",{className:"PostDetails__post",children:Object(p.jsx)("p",{children:s.title})}),Object(p.jsxs)("section",{className:"PostDetails__comments",children:[Object(p.jsx)("button",{type:"button",className:"button",onClick:function(){return f(!m)},children:m?"Show comments":"Hide comments"}),!m&&Object(p.jsx)("ul",{className:"PostDetails__list",children:l.map((function(t){return Object(p.jsxs)("li",{className:"PostDetails__list-item",children:[Object(p.jsx)("button",{type:"button",className:"PostDetails__remove-button button",onClick:function(){return function(t){var e=null===l||void 0===l?void 0:l.filter((function(e){return e.name!==t.name}));j(e)}(t)},children:"X"}),Object(p.jsx)("p",{children:t.body})]},t.id)}))})]}),Object(p.jsx)("section",{children:Object(p.jsx)("div",{className:"PostDetails__form-wrapper",children:Object(p.jsx)(O,{setComment:j})})})]})})},w=function(){var t=Object(u.useState)(),e=Object(r.a)(t,2),n=e[0],c=e[1],s=Object(u.useState)(),o=Object(r.a)(s,2),l=o[0],b=o[1],m=Object(u.useState)(""),h=Object(r.a)(m,2),O=h[0],x=h[1],_=Object(u.useState)(),N=Object(r.a)(_,2),w=N[0],P=N[1],C=function(){var t=Object(a.a)(i.a.mark((function t(){var e;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j();case 2:e=t.sent,c(e);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),S=function(){var t=Object(a.a)(i.a.mark((function t(){var e;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d();case 2:e=t.sent,b(e);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(u.useEffect)((function(){C(),S()}),[]),Object(u.useEffect)((function(){"all"!==O&&O&&v(+O).then((function(t){return c(t)})),"all"===O&&C()}),[O]),Object(p.jsxs)("div",{className:"App",children:[Object(p.jsx)("header",{className:"App__header",children:Object(p.jsxs)("label",{children:["Select a user: \xa0",Object(p.jsxs)("select",{value:O,onChange:function(t){x(t.target.value)},className:"App__user-selector",children:[Object(p.jsx)("option",{value:"all",children:"All users"}),null===l||void 0===l?void 0:l.map((function(t){return Object(p.jsx)("option",{value:"".concat(t.id),children:t.name},t.id)}))]})]})}),Object(p.jsxs)("main",{className:"App__main",children:[Object(p.jsx)("div",{className:"App__sidebar",children:n?Object(p.jsx)(f,{posts:n,setSeletedPostId:P}):"loading..."}),Object(p.jsx)("div",{className:"App__content",children:w?Object(p.jsx)(y,{selectedPostId:w}):"No details"})]})]})};s.a.render(Object(p.jsx)(w,{}),document.getElementById("root"))}],[[21,1,2]]]);
//# sourceMappingURL=main.0bbfc1af.chunk.js.map